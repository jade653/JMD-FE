# 환경 변수 설정 가이드

## 🚨 현재 문제
- `VITE_API_BASE_URL` 환경 변수가 설정되지 않음
- API 요청이 잘못된 URL로 전송됨
- 백엔드로 요청이 제대로 전달되지 않음

## 🔧 해결 방법

### 1. 로컬 개발 환경 (.env 파일)

**JMD-FE 폴더에 `.env` 파일 생성:**
```bash
# API 설정
VITE_API_BASE_URL=https://api.jangmadang.site

# 선택적 액세스 토큰 (필요한 경우)
# VITE_API_ACCESS_TOKEN=your_access_token_here
```

### 2. Vercel 배포 환경

**Vercel 대시보드에서 설정:**
1. **프로젝트 대시보드** 접속
2. **Settings** 탭 클릭
3. **Environment Variables** 섹션 클릭
4. **다음 변수 추가:**

```bash
# 필수 환경 변수
VITE_API_BASE_URL=https://api.jangmadang.site
```

5. **Environment 선택**: Production, Preview, Development 모두 체크
6. **Save** 클릭
7. **Redeploy** 실행

### 3. 환경 변수 확인 방법

**브라우저 콘솔에서 확인:**
```javascript
console.log('API 설정 정보:', {
  envBaseURL: import.meta.env.VITE_API_BASE_URL,
  actualBaseURL: 'https://api.jangmadang.site', // 기본값
  hasAccessToken: !!import.meta.env.VITE_API_ACCESS_TOKEN
});
```

**올바른 결과:**
```javascript
{
  envBaseURL: "https://api.jangmadang.site",
  actualBaseURL: "https://api.jangmadang.site",
  hasAccessToken: false
}
```

**잘못된 결과:**
```javascript
{
  envBaseURL: undefined,
  actualBaseURL: "https://api.jangmadang.site", // 기본값 사용
  hasAccessToken: false
}
```

### 4. 임시 해결책 (이미 적용됨)

**axiosInstance.ts에서 기본값 설정:**
```typescript
const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'https://api.jangmadang.site';
```

이제 환경 변수가 없어도 기본값으로 작동합니다.

### 5. 테스트 방법

1. **브라우저 콘솔 열기**
2. **API 요청 로그 확인:**
   ```
   API 요청: {
     method: "post",
     url: "/api/permit/logout",
     baseURL: "https://api.jangmadang.site",
     fullURL: "https://api.jangmadang.site/api/permit/logout",
     isCorrectURL: true
   }
   ```
3. **`isCorrectURL: true`가 나오면 정상**

### 6. 문제 해결

**환경 변수가 설정되지 않은 경우:**
- 로컬: `.env` 파일 생성
- Vercel: 대시보드에서 환경 변수 설정 후 재배포

**여전히 문제가 있는 경우:**
- 브라우저 캐시 삭제
- 하드 리프레시 (Ctrl+F5)
- Vercel 재배포

## 🎯 예상 결과

수정 후:
- API 요청이 올바른 URL(`https://api.jangmadang.site`)로 전송됨
- 백엔드와 정상적으로 통신됨
- 로그아웃 기능이 정상 작동함 